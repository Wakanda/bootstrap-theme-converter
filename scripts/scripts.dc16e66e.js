"use strict";angular.module("themeBuilderApp",["ngResource","ngRoute","ngSanitize"]).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl"}).otherwise({redirectTo:"/"})}]),angular.module("themeBuilderApp").controller("MainCtrl",["$scope","$timeout","bootstrapSettings","$location",function(a,b,c,d){function e(a){a.stopPropagation(),a.preventDefault(),a.dataTransfer.dropEffect="copy"}function f(b){b.stopPropagation(),b.preventDefault();var c=b.dataTransfer.files[0];if(c){var d=new FileReader;d.readAsText(c,"UTF-8"),d.onload=function(b){var d={};if("json"===c.name.split(".").pop())d=angular.fromJson(b.target.result),a.lessVars=d.vars,a.$apply(),console.log(d.vars);else if("less"===c.name.split(".").pop()){var e=b.target.result.toString().split("\n");angular.forEach(e,function(a){if("@"===a[0]){var b=a.split(":")[0],c=a.split(":")[1];c=c.replace(/^\s+/,""),c=c.split(";")[0],d[b]=c}}),a.lessVars=d,a.$apply(),console.log(d)}a.refresh(),console.log(a.lessVars)},d.onerror=function(){a.lessVars="error reading file"}}}a.themeDetails={name:"My Theme",author:"Grumpy Cat",repository:{type:"git",url:"Repo Url"},copyright:"GNU GPL v3, AGPL v3, Commercial",license:"MIT",engines:{wakanda:">=11"},studio:{label:"Wakanda Corporate",mobile:"false"},version:"1.0.0",loadDependencies:[{id:"",path:"THEMES_CUSTOM"}],hash:"91038c8630d0ca29ba43354e7b3a79322720d3d7"},a.$watch("themeDetails",function(b){a.secureName=b.name.toLowerCase().replace(/ /g,"_"),a.themeDetails.loadDependencies[0].id=a.secureName+"/"+a.secureName+".css"}),a.loadBasicVars=function(){c.get().$promise.then(function(b){a.lessVars=b.vars,a.refresh()})},a.loadBasicVars(),a.refresh=function(){b(function(){less.modifyVars(a.lessVars)},1e3)};var g=document.getElementById("drop_zone");g.addEventListener("dragover",e,!1),g.addEventListener("drop",f,!1),a.generateTheme=function(){console.log(d.path());var b=d.path();b="/"===b?"":b.replace("/","-"),a.resultedCss=document.getElementById("less:"+b+"styles-bootstrap-bootstrap").innerHTML,console.log(a.resultedCss)}}]),angular.module("themeBuilderApp").controller("AboutCtrl",["$scope",function(a){a.awesomeThings=["HTML5 Boilerplate","AngularJS","Karma"]}]),angular.module("themeBuilderApp").service("bootstrapSettings",["$resource",function(a){return a("styles/bootstrap/config.json")}]);